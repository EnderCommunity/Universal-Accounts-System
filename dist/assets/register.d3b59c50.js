import{l as E,d as q,t as f,h as R,o as w,c as a,i as m,B as g,j as B,m as D}from"./index.0d72f7fd.js";import{T as O}from"./Title.a581f7e6.js";import{I as y,N as T,s as b}from"./Notice.ddb6fb07.js";import{M as v,F as _}from"./FlexContainer.0351bcf7.js";const j="_buttonsStickyContainer_1vcf7_13",A="_slideIn_1vcf7_1",P={buttonsStickyContainer:j,slideIn:A};function te(t){if(typeof CryptoJS!="object"){let n=document.createElement("script");n.onload=t,n.src="/libraries/aes.js",document.head.appendChild(n)}else t()}function ne(t){return CryptoJS.MD5(t).toString()}function S(){return{name:{first:void 0,last:void 0},username:void 0,passwordHash:void 0,birthdate:{day:void 0,month:void 0,year:void 0},gender:void 0,pronounce:void 0,securityQuestions:{q1:void 0,q2:void 0,q3:void 0,a1:void 0,a2:void 0,a3:void 0},quickSettings:{profile:void 0,activity:void 0,location:void 0,colorScheme:void 0},agreement:void 0}}let c=S();function L(){c=S()}var p={1:["name.first","name.last"],2:["username"],3:["passwordHash"],4:["birthdate.day","birthdate.month","birthdate.year","gender","pronounce"],5:["securityQuestions.q1","securityQuestions.q2","securityQuestions.q3","securityQuestions.a1","securityQuestions.a2","securityQuestions.a3"],6:["quickSettings.profile","quickSettings.activity","quickSettings.location","quickSettings.colorScheme"],7:["agreement"]},Q=Object.keys(p).length;function ie(t,n){if(E(c),t<1||t>Q)throw new Error("Incorrect section ID!");let i=!1;for(var r in p)r=Number(r),r<=t&&p[Number(r)].forEach(s=>{s=s.split(".").reverse();let e=c[s.pop()];s.forEach(function(o){e=e[o]}),!i&&e==null&&(i=!0,n(!0))});i||n(!1)}function Z(t,n){let i=new XMLHttpRequest;i.open("GET",t),i.send(null),i.onloadend=function(){i.status===200?n(!1,i.responseText):n(new Error(`Unable to fetch file (${t})`),void 0)}}async function M(t){return new Promise((n,i)=>{Z("/lists/banned_words.txt",function(r,s){if(r)throw r;let e=!1,o=t.toLowerCase();s=s.replace(/\r/g,"").toLowerCase().split(/\n/g),s.forEach(u=>{let l=o.indexOf(u);l!=-1&&(l>0?/^[a-z]*$/g.test(t[l-1])&&/^[A-Z]*$/g.test(t[l])||/^[A-Z]*$/g.test(t[l])&&/^[A-Z]*$/g.test(t[l-1])?e=!0:/^[a-z]*$/g.test(o[l-1])||(e=!0):e=!0),s=[]}),n(e)})})}const z=f('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m12 15 .707.707-.707.707-.707-.707L12 15Zm6.707-5.293-6 6-1.414-1.414 6-6 1.414 1.414Zm-7.414 6-6-6 1.414-1.414 6 6-1.414 1.414Z" fill="var(--svg-color)"></path></svg>'),F=(t={})=>(()=>{const n=z.cloneNode(!0);return q(n,t,!0,!0),n})(),H=f("<div></div>"),U=f("<h1>Create a Ciel account</h1>"),J=f("<br>"),G=f("<h3>Enter your <!> and <!>!</h3>");function C(t){return(()=>{const n=H.cloneNode(!0);return n.style.setProperty("width","100%"),n.style.setProperty("position","relative"),n.style.setProperty("overflow","hidden"),m(n,()=>t.children),n})()}function x(t,...n){let i=[],r=[];t.setAttribute("disabled","");function s(){t.removeAttribute("disabled");for(let e=0;e<i.length;e++)if(i[e].value.replace(/\s/gi,"")==""){t.setAttribute("disabled","");break}for(let e=0;e<r.length;e++)if(r[e].selectedIndex<1){t.setAttribute("disabled","");break}}return n.forEach(function(e){let o=document.getElementById(e);if(o.tagName=="INPUT")i.push(o),o.oninput=s;else if(o.tagName=="SELECT")r.push(o),o.addEventListener("change",s);else throw new Error("Unexpected element!")}),s(),s}function I(t,n,i){let r=document.getElementById("local-content");t.setAttribute("disabled",""),r.dataset.processing=!0;let s=[!1],e=!1,o=function(){e||(e=!0,t.removeAttribute("disabled"),r.dataset.processing=!1,s[0]||i())};n(function(){s[0]=!0,o()},o,s)}function X(t){B("Something went wrong!","It looks like some of your registration data is missing!",[["Refill info",function(n,i){L(),t("/user/register"),i()}]])}function $(t){let n;return w(()=>{var i=new IntersectionObserver(function(r){r[0].intersectionRatio===0?n.dataset.sticky=!0:r[0].intersectionRatio===1&&(n.dataset.sticky=!1)},{threshold:[0,1]});i.observe(n);var i=new IntersectionObserver(([r])=>n.dataset.sticky=r.intersectionRatio<1,{threshold:[1]});i.observe(n)}),a(_,{ref(i){const r=n;typeof r=="function"?r(i):n=i},get class(){return P.buttonsStickyContainer},space:"between",horozontal:!0,"no-grow":!0,get children(){return[a(F,{tabindex:0,onClick:function(){window.scrollTo(0,window.scrollY+window.innerHeight/2)}}),D(()=>t.children)]}})}function Y(t){let n=R(),i,r,s;return w(()=>{c.name.first!=null&&(r.children[0].children[0].value=c.name.first),c.name.last!=null&&(s.children[0].children[0].value=c.name.last),x(i,"first_name","last_name")}),t.report(),[a(O,{children:"Sign Up"}),U.cloneNode(!0),J.cloneNode(!0),(()=>{const e=G.cloneNode(!0),o=e.firstChild,u=o.nextSibling,l=u.nextSibling,d=l.nextSibling;return d.nextSibling,m(e,a(v,{children:"first name"}),u),m(e,a(v,{children:"last name"}),d),e})(),a(_,{space:"around",style:{width:"400px"},get children(){return[a(C,{get children(){return[a(y,{ref(e){const o=r;typeof o=="function"?o(e):r=e},id:"first_name",type:"text",label:"First name",autocomplete:"given-name",style:{width:"calc(100% - 8px)"}}),a(y,{ref(e){const o=s;typeof o=="function"?o(e):s=e},id:"last_name",type:"text",label:"Last name",autocomplete:"family-name",style:{width:"calc(100% - 8px)"}})]}}),a(T,{children:"It's recommended to use a device that you own and use frequently to create your Ciel account!"}),a($,{get children(){return[a(g,{type:"link",href:"/user/login",children:"Sign in instead"}),a(g,{ref(e){const o=i;typeof o=="function"?o(e):i=e},type:"action",function:function(){I(i,function(e,o){let u=r.children[0].children[0],l=s.children[0].children[0],d=0,k=function(){d++,d==2&&o()};[[u,r],[l,s]].forEach(function(h){/^[a-zA-Z]+$/.test(h[0].value)?M(h[0].value).then(function(N){N&&(b(h[1],!1,"Profanity not allow!"),e()),k()}):(b(h[1],!1,"Can only contain letters!"),e())})},function(){c.name.first=r.children[0].children[0].value,c.name.last=s.children[0].children[0].value,n("/user/register/username")})},primary:!0,children:"Next"})]}})]}})]}const re=Object.freeze(Object.defineProperty({__proto__:null,InputFieldsContainer:C,clientDataCheck:x,nextCheck:I,redoRegister:X,ButtonsContainer:$,default:Y},Symbol.toStringTag,{value:"Module"}));export{$ as B,C as I,X as a,x as b,ie as c,re as d,ne as h,te as l,Z as m,I as n,c as r,M as t};
