import{h as p,o as g,c as a,i as y,B as f,t as c,j as m}from"./index.3d8901f1.js";import{T as b}from"./Title.a581f7e6.js";import{I as v,N as x,s as o}from"./Notice.0377e528.js";import{M as C,F as _}from"./FlexContainer.58377127.js";import{r as u,I as k,B as N,n as w,c as I,a as $}from"./register.1709f8b0.js";const B=c("<h1>Choose a username!</h1>"),M=c("<br>"),U=c("<h3>Choose your own <!>!</h3>");function z(h){let d=p(),s,n;return g(()=>{let e=n.children[0].children[0];u.username!=null&&(e.value=u.username);let t=()=>{e.value.length<3||e.value.length>20?s.setAttribute("disabled",""):s.removeAttribute("disabled")};t(),e.oninput=t}),h.report(),[a(b,{children:"Sign Up"}),B.cloneNode(!0),M.cloneNode(!0),(()=>{const e=U.cloneNode(!0),t=e.firstChild,l=t.nextSibling;return l.nextSibling,y(e,a(C,{children:"username"}),l),e})(),a(_,{space:"around",style:{width:"400px"},get children(){return[a(k,{get children(){return a(v,{ref(e){const t=n;typeof t=="function"?t(e):n=e},id:"username",type:"text",label:"Username",autocomplete:"off",style:{width:"calc(100% - 8px)"},maxlength:20})}}),a(x,{children:"Your username is public, make sure it does not contain any sensitive or personal information!"}),a(N,{get children(){return[a(f,{type:"action",function:function(){history.back()},children:"Go back"}),a(f,{ref(e){const t=s;typeof t=="function"?t(e):s=e},type:"action",function:function(){w(s,function(e,t){let l=n.children[0].children[0],r=l.value.toLowerCase();if(!/^[A-Za-z0-9_]*$/.test(r))o(n,!1,"Can only contain letters, numbers, and underscores!"),e();else if(!/[a-zA-Z]/.test(r))o(n,!1,"Must at least contain one letter!"),e();else if(r.length<3||r.length>20)o(n,!1,"Must be at least 3 characters long, and cannot exceed 20 characters!"),e();else{var i=new XMLHttpRequest;i.open("GET","/lists/reserved_usernames.txt"),i.send(null),i.onloadend=function(){i.status===200?i.responseText.includes(r)?(o(n,!1,"Username is reserved by the system!"),e()):(m("Caution!","No profanity check for 'username'"),m("Caution!","No availability check for 'username'")):(o(n,!1,"An error occured, please try again later!"),e()),t()}}},function(){u.username=n.children[0].children[0].value,I(2,function(e){e?$(d):d("/user/register/password")})})},primary:!0,children:"Next"})]}})]}})]}export{z as default};
