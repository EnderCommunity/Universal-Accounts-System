import{e as N,t as d,h as S,a as w,o as E,c as a,i as m,B as p,j as A,r as R,k as B,l as u}from"./index.7d913f48.js";import{T}from"./Title.a581f7e6.js";import{I as g,N as L,s as y}from"./Notice.ec895466.js";import{M as v,F as b}from"./FlexContainer.bd502b48.js";const P="_buttonsStickyContainer_1vcf7_13",Z="_slideIn_1vcf7_1",D={buttonsStickyContainer:P,slideIn:Z};function z(n,t){let i=new XMLHttpRequest;i.open("GET",n),i.send(null),i.onloadend=function(){i.status===200?t(!1,i.responseText):t(new Error(`Unable to fetch file (${n})`),void 0)}}async function M(n){return new Promise((t,i)=>{z("/lists/banned_words.txt",function(o,s){if(o)throw o;let e=!1,r=n.toLowerCase();s=s.replace(/\r/g,"").toLowerCase().split(/\n/g),s.forEach(c=>{let l=r.indexOf(c);l!=-1&&(l>0?/^[a-z]*$/g.test(n[l-1])&&/^[A-Z]*$/g.test(n[l])||/^[A-Z]*$/g.test(n[l])&&/^[A-Z]*$/g.test(n[l-1])?e=!0:/^[a-z]*$/g.test(r[l-1])||(e=!0):e=!0),s=[]}),t(e)})})}const O=d('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m12 15 .707.707-.707.707-.707-.707L12 15Zm6.707-5.293-6 6-1.414-1.414 6-6 1.414 1.414Zm-7.414 6-6-6 1.414-1.414 6 6-1.414 1.414Z" fill="var(--svg-color)"></path></svg>'),U=(n={})=>(()=>{const t=O.cloneNode(!0);return N(t,n,!0,!0),t})(),j=d("<div></div>"),q=d("<h1>Create a Ciel account</h1>"),F=d("<br>"),H=d("<h3>Enter your <!> and <!>!</h3>");function _(n){return(()=>{const t=j.cloneNode(!0);return t.style.setProperty("width","100%"),t.style.setProperty("position","relative"),t.style.setProperty("overflow","hidden"),m(t,()=>n.children),t})()}function x(n,...t){let i=[],o=[];n.setAttribute("disabled","");function s(){n.removeAttribute("disabled");for(let e=0;e<i.length;e++)if(i[e].value.replace(/\s/gi,"")==""){n.setAttribute("disabled","");break}for(let e=0;e<o.length;e++)if(o[e].selectedIndex<1){n.setAttribute("disabled","");break}}return t.forEach(function(e){let r=document.getElementById(e);if(r.tagName=="INPUT")i.push(r),r.oninput=s;else if(r.tagName=="SELECT")o.push(r),r.addEventListener("change",s);else throw new Error("Unexpected element!")}),s(),s}function C(n,t,i){let o=document.getElementById("local-content");n.setAttribute("disabled",""),o.dataset.processing=!0;let s=[!1],e=!1,r=function(){e||(e=!0,n.removeAttribute("disabled"),o.dataset.processing=!1,s[0]||i())};t(function(){s[0]=!0,r()},r,s)}function G(n){A("Something went wrong!","It looks like some of your registration data is missing!",[["Refill info",function(t,i){R(),n("/user/register"),i()}]])}function $(n){let t;return w(()=>{var i=new IntersectionObserver(function(o){o[0].intersectionRatio===0?t.dataset.sticky=!0:o[0].intersectionRatio===1&&(t.dataset.sticky=!1)},{threshold:[0,1]});i.observe(t);var i=new IntersectionObserver(([o])=>t.dataset.sticky=o.intersectionRatio<1,{threshold:[1]});i.observe(t)}),a(b,{ref(i){const o=t;typeof o=="function"?o(i):t=i},get class(){return D.buttonsStickyContainer},space:"between",horozontal:!0,"no-grow":!0,get children(){return[a(U,{tabindex:0,onClick:function(){window.scrollTo(0,window.scrollY+window.innerHeight/2)}}),B(()=>n.children)]}})}function X(n){let t=S(),i,o,s;return w(()=>{u.name.first!=null&&(o.children[0].children[0].value=u.name.first),u.name.last!=null&&(s.children[0].children[0].value=u.name.last),x(i,"first_name","last_name"),n.pageLoaded()}),E(()=>{n.pageUnloading()}),[a(T,{children:"Sign Up"}),q.cloneNode(!0),F.cloneNode(!0),(()=>{const e=H.cloneNode(!0),r=e.firstChild,c=r.nextSibling,l=c.nextSibling,f=l.nextSibling;return f.nextSibling,m(e,a(v,{children:"first name"}),c),m(e,a(v,{children:"last name"}),f),e})(),a(b,{space:"around",style:{width:"400px"},get children(){return[a(_,{get children(){return[a(g,{ref(e){const r=o;typeof r=="function"?r(e):o=e},id:"first_name",type:"text",label:"First name",autocomplete:"given-name",style:{width:"calc(100% - 8px)"}}),a(g,{ref(e){const r=s;typeof r=="function"?r(e):s=e},id:"last_name",type:"text",label:"Last name",autocomplete:"family-name",style:{width:"calc(100% - 8px)"}})]}}),a(L,{children:"It's recommended to use a device that you own and use frequently to create your Ciel account!"}),a($,{get children(){return[a(p,{type:"link",href:"/user/login",children:"Sign in instead"}),a(p,{ref(e){const r=i;typeof r=="function"?r(e):i=e},type:"action",function:function(){C(i,function(e,r){let c=o.children[0].children[0],l=s.children[0].children[0],f=0,I=function(){f++,f==2&&r()};[[c,o],[l,s]].forEach(function(h){/^[a-zA-Z]+$/.test(h[0].value)?M(h[0].value).then(function(k){k&&(y(h[1],!1,"Profanity not allow!"),e()),I()}):(y(h[1],!1,"Can only contain letters!"),e())})},function(){u.name.first=o.children[0].children[0].value,u.name.last=s.children[0].children[0].value,t("/user/register/username")})},primary:!0,children:"Next"})]}})]}})]}const V=Object.freeze(Object.defineProperty({__proto__:null,InputFieldsContainer:_,clientDataCheck:x,nextCheck:C,redoRegister:G,ButtonsContainer:$,default:X},Symbol.toStringTag,{value:"Module"}));export{$ as B,_ as I,V as a,x as c,z as m,C as n,G as r,M as t};
