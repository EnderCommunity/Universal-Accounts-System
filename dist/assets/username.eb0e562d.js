import{h as b,a as x,n as g,o as C,c as a,i as _,B as y,t as f,l as c,j as k}from"./index.7d913f48.js";import{T as w}from"./Title.a581f7e6.js";import{I as N,N as I,s as r}from"./Notice.ec895466.js";import{M as U,F as $}from"./FlexContainer.bd502b48.js";import{I as B,B as M,n as A,t as S,r as v}from"./register.c09b45c5.js";const T=f("<h1>Choose a username!</h1>"),D=f("<br>"),F=f("<h3>Choose your own <!>!</h3>");function Z(d){let u=b(),i,t;return x(()=>{let e=t.children[0].children[0];c.username!=null&&(e.value=c.username);let n=()=>{e.value.length<3||e.value.length>20?i.setAttribute("disabled",""):i.removeAttribute("disabled")};n(),e.oninput=n,g(1,function(s){s?v(u):d.pageLoaded()})}),C(()=>{d.pageUnloading()}),[a(w,{children:"Sign Up"}),T.cloneNode(!0),D.cloneNode(!0),(()=>{const e=F.cloneNode(!0),n=e.firstChild,s=n.nextSibling;return s.nextSibling,_(e,a(U,{children:"username"}),s),e})(),a($,{space:"around",style:{width:"400px"},get children(){return[a(B,{get children(){return a(N,{ref(e){const n=t;typeof n=="function"?n(e):t=e},id:"username",type:"text",label:"Username",autocomplete:"off",style:{width:"calc(100% - 8px)"},maxlength:20})}}),a(I,{children:"Your username is public, make sure it does not contain any sensitive or personal information!"}),a(M,{get children(){return[a(y,{type:"action",function:function(){history.back()},children:"Go back"}),a(y,{ref(e){const n=i;typeof n=="function"?n(e):i=e},type:"action",function:function(){A(i,function(e,n){let s=t.children[0].children[0],o=s.value.toLowerCase(),h=0,m=function(){h++,h==2&&n()};if(!/^[A-Za-z0-9_]*$/.test(o))r(t,!1,"Can only contain letters, numbers, and underscores!"),e();else if(!/[a-zA-Z]/.test(o))r(t,!1,"Must at least contain one letter!"),e();else if(o.length<3||o.length>20)r(t,!1,"Must be at least 3 characters long, and cannot exceed 20 characters!"),e();else{var l=new XMLHttpRequest;l.open("GET","/lists/reserved_usernames.txt"),l.send(null),l.onloadend=function(){l.status===200?l.responseText.includes(o)&&(r(t,!1,"Username is reserved by the system!"),e()):(r(t,!1,"An error occured, please try again later!"),e()),m()},S(s.value).then(function(p){p&&(r(t,!1,"Profanity not allow!"),e()),m()}),k("Caution!","No availability check for 'username'")}},function(){c.username=t.children[0].children[0].value,g(2,function(e){e?v(u):u("/user/register/password")})})},primary:!0,children:"Next"})]}})]}})]}export{Z as default};
