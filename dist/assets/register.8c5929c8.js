import{h as x,o as v,c as s,i as h,B as y,t as d,j as m}from"./index.bded2c97.js";import{T as I}from"./Title.a581f7e6.js";import{I as g,N as E,s as q}from"./Notice.f20458a6.js";import{M as b,F as S}from"./FlexContainer.b673b36f.js";const $="_buttonsStickyContainer_guore_13",B={buttonsStickyContainer:$};function U(i){if(typeof CryptoJS!="object"){let t=document.createElement("script");t.onload=i,t.src="/libraries/aes.js",document.head.appendChild(t)}else i()}function H(i){return CryptoJS.MD5(i).toString()}function _(){return{name:{first:void 0,last:void 0},username:void 0,passwordHash:void 0,birthdate:{day:void 0,month:void 0,year:void 0},gender:void 0,pronounce:void 0,securityQuestions:{q1:void 0,q2:void 0,q3:void 0,a1:void 0,a2:void 0,a3:void 0},quickSettings:{profile:void 0,activity:void 0,location:void 0,colorScheme:void 0}}}let l=_();function D(){l=_()}var p={1:["name.first","name.last"],2:["username"],3:["passwordHash"],4:["birthdate.day","birthdate.month","birthdate.year","gender","pronounce"],5:["securityQuestions.q1","securityQuestions.q2","securityQuestions.q3","securityQuestions.a1","securityQuestions.a2","securityQuestions.a3"],6:["quickSettings.profile","quickSettings.activity","quickSettings.location","quickSettings.colorScheme"]},O=Object.keys(p).length;function J(i,t){if(console.log(l),i<1||i>O)throw new Error("Incorrect section ID!");let o=!1;for(var n in p)n=Number(n),n<=i&&p[Number(n)].forEach(a=>{a=a.split(".").reverse();let e=l[a.pop()];a.forEach(function(r){e=e[r]}),!o&&e==null&&(o=!0,t(!0))});o||t(!1)}const R=d("<div></div>"),j=d("<h1>Create a Ciel account</h1>"),Q=d("<br>"),A=d("<h3>Enter your <!> and <!>!</h3>");function C(i){return(()=>{const t=R.cloneNode(!0);return t.style.setProperty("width","100%"),t.style.setProperty("position","relative"),t.style.setProperty("overflow","hidden"),h(t,()=>i.children),t})()}function N(i,...t){let o=[],n=[];i.setAttribute("disabled","");function a(){i.removeAttribute("disabled");for(let e=0;e<o.length;e++)if(o[e].value.replace(/\s/gi,"")==""){i.setAttribute("disabled","");break}for(let e=0;e<n.length;e++)if(n[e].selectedIndex<1){i.setAttribute("disabled","");break}}return t.forEach(function(e){let r=document.getElementById(e);if(r.tagName=="INPUT")o.push(r),r.oninput=a;else if(r.tagName=="SELECT")n.push(r),r.addEventListener("change",a);else throw new Error("Unexpected element!")}),a(),a}function k(i,t,o){let n=document.getElementById("local-content");i.setAttribute("disabled",""),n.dataset.processing=!0;let a=[!1],e=!1,r=function(){e||(e=!0,i.removeAttribute("disabled"),n.dataset.processing=!1,a[0]||o())};t(function(){a[0]=!0,r()},r,a)}function M(i){m("Something went wrong!","It looks like some of your registration data is missing!",[["Refill info",function(t,o){D(),i("/user/register"),o()}]])}function w(i){let t;return v(()=>{var o=new IntersectionObserver(function(n){n[0].intersectionRatio===0?t.dataset.sticky=!0:n[0].intersectionRatio===1&&(t.dataset.sticky=!1)},{threshold:[0,1]});o.observe(t);var o=new IntersectionObserver(([n])=>t.dataset.sticky=n.intersectionRatio<1,{threshold:[1]});o.observe(t)}),s(S,{ref(o){const n=t;typeof n=="function"?n(o):t=o},get class(){return B.buttonsStickyContainer},space:"between",horozontal:!0,"no-grow":!0,get children(){return i.children}})}function P(i){let t=x(),o,n,a;return v(()=>{l.name.first!=null&&(n.children[0].children[0].value=l.name.first),l.name.last!=null&&(a.children[0].children[0].value=l.name.last),N(o,"first_name","last_name")}),i.report(),[s(I,{children:"Sign Up"}),j.cloneNode(!0),Q.cloneNode(!0),(()=>{const e=A.cloneNode(!0),r=e.firstChild,u=r.nextSibling,f=u.nextSibling,c=f.nextSibling;return c.nextSibling,h(e,s(b,{children:"first name"}),u),h(e,s(b,{children:"last name"}),c),e})(),s(S,{space:"around",style:{width:"400px"},get children(){return[s(C,{get children(){return[s(g,{ref(e){const r=n;typeof r=="function"?r(e):n=e},id:"first_name",type:"text",label:"First name",autocomplete:"given-name",style:{width:"calc(100% - 8px)"}}),s(g,{ref(e){const r=a;typeof r=="function"?r(e):a=e},id:"last_name",type:"text",label:"Last name",autocomplete:"family-name",style:{width:"calc(100% - 8px)"}})]}}),s(E,{children:"It's recommended to use a device that you own and use frequently to create your Ciel account!"}),s(w,{get children(){return[s(y,{type:"link",href:"/user/login",children:"Sign in instead"}),s(y,{ref(e){const r=o;typeof r=="function"?r(e):o=e},type:"action",function:function(){k(o,function(e,r){let u=n.children[0].children[0],f=a.children[0].children[0];[[u,n],[f,a]].forEach(function(c){/^[a-zA-Z]+$/.test(c[0].value)||(q(c[1],!1,"Can only contain letters!"),e())}),m("Caution!","No profanity check for 'first_name'"),m("Caution!","No profanity check for 'last_name'"),r()},function(){l.name.first=n.children[0].children[0].value,l.name.last=a.children[0].children[0].value,t("/user/register/username")})},primary:!0,children:"Next"})]}})]}})]}const Z=Object.freeze(Object.defineProperty({__proto__:null,InputFieldsContainer:C,clientDataCheck:N,nextCheck:k,redoRegister:M,ButtonsContainer:w,default:P},Symbol.toStringTag,{value:"Module"}));export{w as B,C as I,M as a,N as b,J as c,Z as d,H as h,U as l,k as n,l as r};
